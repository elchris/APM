# Story 7.1: Fix Handoff Notes Location

**Epic:** 7 - APM Framework Improvements  
**Story Points:** 3  
**Priority:** High  
**Status:** In Progress  
**Assignee:** AP Orchestrator  

## Story Description

**As an** APM framework user  
**I want** handoff notes to be saved in the session_notes directory  
**So that** all agent session artifacts are properly organized and project_docs remains focused on project deliverables  

## Background

Currently, agents are creating handoff/transition notes in `project_docs/planning/` directory (e.g., `analyst-transition-notes.md`, `pm-transition-notes.md`). These should be stored with other session artifacts in `.apm/session_notes/` to maintain proper separation between:
- Session artifacts (temporary, agent-specific) → `.apm/session_notes/`
- Project deliverables (permanent, project-specific) → `project_docs/`

## Acceptance Criteria

- [x] Handoff command template updated to specify `.apm/session_notes/handoffs/` as the location for handoff notes
- [x] All persona templates updated with explicit guidance about handoff note locations
- [x] Handoffs subdirectory created in `.apm/session_notes/`
- [x] Existing handoff notes migrated from `project_docs/planning/` to `.apm/session_notes/handoffs/`
- [x] Documentation updated to reflect new handoff note location (README.md created)
- [ ] Agents consistently save handoff notes in the correct location during testing (requires live testing)

## Technical Requirements

### 1. Update Handoff Command Template
- Modify `/handoff` command template to include explicit path guidance
- Add validation to ensure handoff notes are saved in correct location
- Update context transfer format to include file path

### 2. Update Persona Templates
- Add handoff note location guidance to all 9 persona templates
- Ensure consistent messaging across all personas
- Include examples of proper handoff note file naming

### 3. Create Directory Structure
```bash
.apm/session_notes/
├── handoffs/           # New directory for handoff notes
│   └── README.md      # Explanation of handoff note format
├── archive/
└── *.md               # Regular session notes
```

### 4. Migration Script
- Identify existing handoff notes in `project_docs/planning/`
- Move to `.apm/session_notes/handoffs/` with proper naming
- Update any references in other documents

## Implementation Plan

1. **Update Templates** (1 hour)
   - Handoff command template
   - All 9 persona templates
   
2. **Create Directory Structure** (30 min)
   - Create handoffs subdirectory
   - Add README with format guidelines
   
3. **Migration** (30 min)
   - Move existing handoff notes
   - Update references
   
4. **Testing** (1 hour)
   - Test handoff between different personas
   - Verify notes saved in correct location
   - Validate file naming conventions

## Files to Modify

- `.apm/.installer/templates/claude/commands/handoff.md.template`
- `.apm/.installer/templates/personas/*.md.template` (all 9 personas)
- `.apm/.installer/templates/agents/personas/*.md.template` (duplicates)
- Existing handoff notes in `project_docs/planning/`

## Success Metrics

- Zero handoff notes created in `project_docs/` after implementation
- All handoff notes properly organized in `.apm/session_notes/handoffs/`
- Clear separation between session artifacts and project deliverables

## Notes

This change improves the overall organization of the APM framework by maintaining a clear boundary between:
- **Session artifacts**: Temporary, agent-specific files that document the work process
- **Project deliverables**: Permanent, project-specific files that represent actual work products

## Implementation Summary

**Completed:** 2025-01-21

### Changes Made:
1. **Handoff Command Template** - Updated with explicit path and storage instructions
2. **Persona Templates** - All 9 personas + orchestrator updated with handoff note location guidance
3. **Directory Structure** - Created `.apm/session_notes/handoffs/` with README.md
4. **Migration** - Moved 2 existing transition notes to new location with proper naming

### Files Modified:
- `.apm/.installer/templates/claude/commands/handoff.md.template`
- `.apm/.installer/templates/personas/*.md.template` (9 files)
- `.apm/.installer/templates/agents/personas/*.md.template` (10 files)
- `.apm/.installer/templates/claude/commands/ap_orchestrator.md.template`

### Files Migrated:
- `analyst-transition-notes.md` → `2025-07-18-09-02-53-analyst-to-pm-handoff.md`
- `pm-transition-notes.md` → `2025-07-18-09-39-54-pm-to-po-handoff.md`

---

**Created:** 2025-01-21  
**Last Updated:** 2025-01-21  
**Completed:** 2025-01-21  
**Story Author:** AP Orchestrator